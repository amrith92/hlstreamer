\hypertarget{segmenter_8c}{\section{segmenter.\-c \-File \-Reference}
\label{segmenter_8c}\index{segmenter.\-c@{segmenter.\-c}}
}
{\ttfamily \#include \char`\"{}segmenter.\-h\char`\"{}}\*
{\ttfamily \#include $<$gst/gst.\-h$>$}\*
{\ttfamily \#include $<$stdio.\-h$>$}\*
{\ttfamily \#include $<$stdlib.\-h$>$}\*
{\ttfamily \#include $<$string.\-h$>$}\*
\-Include dependency graph for segmenter.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{segmenter_8c__incl}
\end{center}
\end{figure}
\subsection*{\-Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{segmenter_8c_aeca034f67218340ecb2261a22c2f3dcd}{\-B\-U\-F\-S\-I\-Z\-E}~128
\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{segmenter_8c_a5ff4a83331533603d092040787b6f1ae}{grab\-\_\-videoscale\-\_\-caps} (char $\ast$buffer, const uint16\-\_\-t width, const uint16\-\_\-t height)
\item 
void \hyperlink{segmenter_8c_a2abc6ba2017a01961eaf3981bf806e89}{grab\-\_\-videorate\-\_\-caps} (char $\ast$buffer, const uint8\-\_\-t rate)
\item 
void \hyperlink{segmenter_8c_a07f44bea24b85b0d725d379ac5f8decb}{grab\-\_\-audioresample\-\_\-caps} (char $\ast$buffer, const uint16\-\_\-t rate)
\item 
const int \hyperlink{segmenter_8c_a4aa0ddbb149a44f343c66205a24b7c15}{validate\-\_\-params} (const \hyperlink{struct_params}{\-Params} $\ast$params)
\item 
int \hyperlink{segmenter_8c_a3179e33ff6d271287f0caed5b1a4de69}{segmenter\-\_\-try} (\hyperlink{struct_params}{\-Params} $\ast$params)
\end{DoxyCompactItemize}


\subsection{\-Define \-Documentation}
\hypertarget{segmenter_8c_aeca034f67218340ecb2261a22c2f3dcd}{\index{segmenter.\-c@{segmenter.\-c}!\-B\-U\-F\-S\-I\-Z\-E@{\-B\-U\-F\-S\-I\-Z\-E}}
\index{\-B\-U\-F\-S\-I\-Z\-E@{\-B\-U\-F\-S\-I\-Z\-E}!segmenter.c@{segmenter.\-c}}
\subsubsection[{\-B\-U\-F\-S\-I\-Z\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define {\bf \-B\-U\-F\-S\-I\-Z\-E}~128}}\label{segmenter_8c_aeca034f67218340ecb2261a22c2f3dcd}


\-Definition at line 11 of file segmenter.\-c.



\-Referenced by segmenter\-\_\-try().



\subsection{\-Function \-Documentation}
\hypertarget{segmenter_8c_a07f44bea24b85b0d725d379ac5f8decb}{\index{segmenter.\-c@{segmenter.\-c}!grab\-\_\-audioresample\-\_\-caps@{grab\-\_\-audioresample\-\_\-caps}}
\index{grab\-\_\-audioresample\-\_\-caps@{grab\-\_\-audioresample\-\_\-caps}!segmenter.c@{segmenter.\-c}}
\subsubsection[{grab\-\_\-audioresample\-\_\-caps}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf grab\-\_\-audioresample\-\_\-caps} (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buffer, }
\item[{const uint16\-\_\-t}]{rate}
\end{DoxyParamCaption}
)}}\label{segmenter_8c_a07f44bea24b85b0d725d379ac5f8decb}
\-Grab customized audioresample caps string 

\-Definition at line 31 of file segmenter.\-c.



\-References \-A\-R\-E\-S.



\-Referenced by segmenter\-\_\-try().

\hypertarget{segmenter_8c_a2abc6ba2017a01961eaf3981bf806e89}{\index{segmenter.\-c@{segmenter.\-c}!grab\-\_\-videorate\-\_\-caps@{grab\-\_\-videorate\-\_\-caps}}
\index{grab\-\_\-videorate\-\_\-caps@{grab\-\_\-videorate\-\_\-caps}!segmenter.c@{segmenter.\-c}}
\subsubsection[{grab\-\_\-videorate\-\_\-caps}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf grab\-\_\-videorate\-\_\-caps} (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buffer, }
\item[{const uint8\-\_\-t}]{rate}
\end{DoxyParamCaption}
)}}\label{segmenter_8c_a2abc6ba2017a01961eaf3981bf806e89}
\-Grab customized videorate caps string 

\-Definition at line 22 of file segmenter.\-c.



\-References \-V\-R\-A\-T\-E.



\-Referenced by segmenter\-\_\-try().

\hypertarget{segmenter_8c_a5ff4a83331533603d092040787b6f1ae}{\index{segmenter.\-c@{segmenter.\-c}!grab\-\_\-videoscale\-\_\-caps@{grab\-\_\-videoscale\-\_\-caps}}
\index{grab\-\_\-videoscale\-\_\-caps@{grab\-\_\-videoscale\-\_\-caps}!segmenter.c@{segmenter.\-c}}
\subsubsection[{grab\-\_\-videoscale\-\_\-caps}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf grab\-\_\-videoscale\-\_\-caps} (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{buffer, }
\item[{const uint16\-\_\-t}]{width, }
\item[{const uint16\-\_\-t}]{height}
\end{DoxyParamCaption}
)}}\label{segmenter_8c_a5ff4a83331533603d092040787b6f1ae}
\-Grab customized videoscale caps string 

\-Definition at line 13 of file segmenter.\-c.



\-References \-V\-S\-C\-A\-L\-E.



\-Referenced by segmenter\-\_\-try().

\hypertarget{segmenter_8c_a3179e33ff6d271287f0caed5b1a4de69}{\index{segmenter.\-c@{segmenter.\-c}!segmenter\-\_\-try@{segmenter\-\_\-try}}
\index{segmenter\-\_\-try@{segmenter\-\_\-try}!segmenter.c@{segmenter.\-c}}
\subsubsection[{segmenter\-\_\-try}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf segmenter\-\_\-try} (
\begin{DoxyParamCaption}
\item[{{\bf \-Params} $\ast$}]{params}
\end{DoxyParamCaption}
)}}\label{segmenter_8c_a3179e33ff6d271287f0caed5b1a4de69}
\-The segmenter must be callable from the server, and as such the following function is the entry-\/point \-Initialize buffer

\-Initialize gstreamer

\-Create elements

\-Create empty pipeline

\-Set properties \-Set the location to transcode \& segment

\-Set the multifilesink properties

\-Set the update-\/frequency on progressreport

\-Set the videorate properties

\-Set the aspectratiocrop properties

\-Set x264enc properties

\-Set ffenc\-\_\-aac properties

\-Build the pipeline.

\-Connect to the pad-\/added signal

\-Start transcoding

\-Listen to the bus

\-Parse message

\-Free resources 

\-Definition at line 45 of file segmenter.\-c.



\-References \-A\-C\-O\-N\-V, \-Audio\-Bag\-::aconvcaps, \-Audio\-Bag\-::arescaps, \-Video\-Bag\-::aspectratiocrop, \-Params\-::audio\-\_\-props, \-Transcoder\-Data\-::audiobag, \-Audio\-Bag\-::audioconvert, \-Audio\-Bag\-::audioresample, \-Video\-Params\-::bitrate, \-Audio\-Params\-::bitrate, \-B\-U\-F\-S\-I\-Z\-E, \-Audio\-Bag\-::decqueue, \-Audio\-Bag\-::ffenc\-\_\-aac, \-Video\-Bag\-::ffmpegcolourspace, \-Transcoder\-Data\-::filesrc, \-Video\-Params\-::framerate, grab\-\_\-audioresample\-\_\-caps(), grab\-\_\-videorate\-\_\-caps(), grab\-\_\-videoscale\-\_\-caps(), \-Video\-Params\-::height, \-H\-L\-S\-\_\-\-N\-A\-M\-E, \-H\-L\-S\-\_\-\-V\-E\-R, \-Params\-::in, \-Video\-Params\-::keyinterval, \-Transcoder\-Data\-::mpegtsmux, \-Video\-Bag\-::muxqueue, \-Audio\-Bag\-::muxqueue, \-Video\-Params\-::noisereduction, \-Params\-::out, \-Transcoder\-Data\-::pipeline, \-Transcoder\-Data\-::progressreport, \-Transcoder\-Data\-::sink, \-Transcoder\-Data\-::source, \-Params\-::video\-\_\-props, \-Transcoder\-Data\-::videobag, \-Video\-Bag\-::videorate, \-Video\-Bag\-::videoscale, \-Video\-Bag\-::vratecaps, \-Video\-Bag\-::vscalecaps, \-Video\-Params\-::width, and \-Video\-Bag\-::x264enc.



\-Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{segmenter_8c_a3179e33ff6d271287f0caed5b1a4de69_cgraph}
\end{center}
\end{figure}


\hypertarget{segmenter_8c_a4aa0ddbb149a44f343c66205a24b7c15}{\index{segmenter.\-c@{segmenter.\-c}!validate\-\_\-params@{validate\-\_\-params}}
\index{validate\-\_\-params@{validate\-\_\-params}!segmenter.c@{segmenter.\-c}}
\subsubsection[{validate\-\_\-params}]{\setlength{\rightskip}{0pt plus 5cm}const int {\bf validate\-\_\-params} (
\begin{DoxyParamCaption}
\item[{const {\bf \-Params} $\ast$}]{params}
\end{DoxyParamCaption}
)}}\label{segmenter_8c_a4aa0ddbb149a44f343c66205a24b7c15}
\-Validate incoming parameters 

\-Definition at line 40 of file segmenter.\-c.

